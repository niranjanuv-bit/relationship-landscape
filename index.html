<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Relationship Landscape - Discover Your Love Style</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide React icons as inline SVG components
        const Heart = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
        );

        const Home = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
        );

        const Mountain = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3l7 18 7-18M9 12h6" />
            </svg>
        );

        const Sun = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        const Cloud = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
            </svg>
        );

        const Flower = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Users = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        const RelationshipLandscapeGame = () => {
            const [step, setStep] = useState(0);
            const [answers, setAnswers] = useState({});
            const [results, setResults] = useState(null);

            const questions = [
                {
                    id: 'house',
                    title: 'Imagine a House',
                    prompt: 'Picture a house in your mind. Where is it?',
                    icon: Home,
                    options: [
                        { value: 'center', label: 'In the center of an open field - visible from all sides', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'hill', label: 'On top of a hill - elevated and somewhat distant', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'forest', label: 'Hidden in a forest - private and protected', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'village', label: 'Among other houses in a village - connected and close', traits: { attachment: 'anxious', role: 'supportive' } }
                    ]
                },
                {
                    id: 'door',
                    title: 'The Door',
                    prompt: 'How is the door to this house?',
                    icon: Home,
                    options: [
                        { value: 'wide-open', label: 'Wide open with a welcome mat', traits: { attachment: 'secure', role: 'supportive' } },
                        { value: 'locked', label: 'Locked with a peephole', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'hidden', label: 'Hard to find or disguised', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'glass', label: 'Large glass windows - you can see if anyone is there', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'walls',
                    title: 'The Walls',
                    prompt: 'What are the walls of the house like?',
                    icon: Home,
                    options: [
                        { value: 'normal', label: 'Normal walls with some windows - balanced privacy and openness', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'thick', label: 'Thick stone walls - strong boundaries', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'reinforced', label: 'Reinforced but with an alarm system - protected but anxious', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'thin', label: 'Thin walls - you can hear what\'s happening around you', traits: { attachment: 'anxious', role: 'supportive' } }
                    ]
                },
                {
                    id: 'distance',
                    title: 'The Distance',
                    prompt: 'When you imagine a loved one, where do you picture them?',
                    icon: Heart,
                    options: [
                        { value: 'nearby', label: 'Nearby but with their own space - close but separate', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'far', label: 'In the distance - you can see them but they\'re not too close', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'hiding', label: 'You want them close but you\'re hiding inside', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'very-close', label: 'Right next to you - constant presence', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'phone',
                    title: 'The Phone Call',
                    prompt: 'Your phone rings with an unknown number. What do you do?',
                    icon: Users,
                    options: [
                        { value: 'answer', label: 'Answer it - could be something interesting', traits: { attachment: 'secure', role: 'supportive' } },
                        { value: 'ignore', label: 'Let it go to voicemail - they can leave a message', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'anxious', label: 'Feel anxious - could be bad news or rejection', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'hope', label: 'Hope it\'s someone you know reaching out', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'departure',
                    title: 'The Departure',
                    prompt: 'Someone you care about is leaving for a trip. How do you feel?',
                    icon: Cloud,
                    options: [
                        { value: 'fine', label: 'You\'ll miss them but you\'re fine - excited to hear their stories', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'relieved', label: 'A bit relieved - you enjoy your alone time', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'worried', label: 'Worried they might not come back or might change', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'upset', label: 'Upset and wanting constant contact while they\'re gone', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'conflict',
                    title: 'The Disagreement',
                    prompt: 'After a small argument with someone close, what\'s your instinct?',
                    icon: Cloud,
                    options: [
                        { value: 'talk', label: 'Talk it through calmly when you\'re both ready', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'withdraw', label: 'Need space and time alone to process', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'panic', label: 'Panic that the relationship is ending', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'fix', label: 'Try to fix it immediately - can\'t stand the tension', traits: { attachment: 'anxious', role: 'supportive' } }
                    ]
                },
                {
                    id: 'vulnerability',
                    title: 'The Secret',
                    prompt: 'Someone shares something deeply personal with you. Your reaction?',
                    icon: Heart,
                    options: [
                        { value: 'honored', label: 'Feel honored and share something similar back', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'uncomfortable', label: 'Feel a bit uncomfortable - that\'s a lot of intimacy', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'scared', label: 'Feel scared - will they expect the same from you?', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'closer', label: 'Feel intensely closer - this is what you\'ve been waiting for', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'texts',
                    title: 'The Message',
                    prompt: 'Someone you\'re dating hasn\'t texted back in a few hours. You think:',
                    icon: Users,
                    options: [
                        { value: 'busy', label: 'They\'re probably busy - I\'ll hear from them later', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'fine', label: 'That\'s fine - I\'m not checking my phone constantly either', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'wrong', label: 'Something\'s wrong - did I say something bad?', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'upset', label: 'Feel hurt and keep checking your phone', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'commitment',
                    title: 'The Next Step',
                    prompt: 'A relationship is getting more serious. Your honest reaction?',
                    icon: Heart,
                    options: [
                        { value: 'excited', label: 'Excited if it feels right - you\'re ready when you\'re ready', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'trapped', label: 'Feel a bit trapped - you need your freedom', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'terrified', label: 'Want it deeply but also terrified of getting hurt', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'finally', label: 'Finally! You\'ve been waiting for this commitment', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'alone-time',
                    title: 'Solo Evening',
                    prompt: 'You have an unexpected free evening alone. You feel:',
                    icon: Sun,
                    options: [
                        { value: 'content', label: 'Content - you enjoy both alone time and company', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'perfect', label: 'Perfect - this is when you recharge', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'isolated', label: 'Isolated and wondering if people forgot about you', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'lonely', label: 'Lonely - you start reaching out to people', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'intimacy',
                    title: 'The Closeness',
                    prompt: 'When someone wants to be very emotionally close, you:',
                    icon: Heart,
                    options: [
                        { value: 'comfortable', label: 'Feel comfortable as long as it\'s mutual and healthy', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'suffocated', label: 'Feel suffocated - you need breathing room', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'suspicious', label: 'Want it but don\'t trust it - what do they really want?', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'grateful', label: 'Feel grateful and want even more closeness', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'partner-success',
                    title: 'Their Success',
                    prompt: 'Your partner gets amazing news about a big achievement. Your first instinct?',
                    icon: Sun,
                    options: [
                        { value: 'celebrate', label: 'Celebrate with them - their joy is your joy', traits: { attachment: 'secure', role: 'supportive' } },
                        { value: 'proud', label: 'Feel proud but give them space to enjoy it', traits: { attachment: 'avoidant', role: 'companionate' } },
                        { value: 'insecure', label: 'Happy but worried they might outgrow you', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'devoted', label: 'Drop everything to help them celebrate', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'love-expression',
                    title: 'Showing Love',
                    prompt: 'How do you most naturally show someone you love them?',
                    icon: Heart,
                    options: [
                        { value: 'acts', label: 'Through consistent actions and being there', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'practical', label: 'By helping solve their problems and building together', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'giving', label: 'By anticipating their needs and putting them first', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'words', label: 'Through constant affection and verbal reassurance', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'date-night',
                    title: 'Perfect Evening',
                    prompt: 'What sounds like the ideal date night?',
                    icon: Heart,
                    options: [
                        { value: 'comfortable', label: 'Cozy night in - cooking together and talking', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'activity', label: 'Doing something productive or learning together', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'attentive', label: 'Whatever they want - you\'re happy making them happy', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'romantic', label: 'Candlelit dinner, flowers, the whole romantic experience', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'partner-struggling',
                    title: 'Their Hard Day',
                    prompt: 'Your partner had a terrible day. What do you do?',
                    icon: Cloud,
                    options: [
                        { value: 'listen', label: 'Listen and offer support - let them decide what they need', traits: { attachment: 'secure', role: 'supportive' } },
                        { value: 'solve', label: 'Help them figure out solutions and next steps', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'absorb', label: 'Try to take on their pain and fix everything for them', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'intense', label: 'Feel their pain deeply and want to be inseparable', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                },
                {
                    id: 'relationship-vision',
                    title: 'The Future',
                    prompt: 'When you think about a long-term relationship, what matters most?',
                    icon: Sun,
                    options: [
                        { value: 'friendship', label: 'Deep friendship and enjoying life together', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'partnership', label: 'Building something meaningful and having shared goals', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'devotion', label: 'Being there for them no matter what it costs you', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'romance', label: 'Keeping the spark alive and never losing the magic', traits: { attachment: 'anxious', role: 'romantic' } }
                    ]
                },
                {
                    id: 'energy-level',
                    title: 'Emotional Energy',
                    prompt: 'How do you tend to show up in relationships?',
                    icon: Sun,
                    options: [
                        { value: 'steady', label: 'Steady and reliable - consistent emotional presence', traits: { attachment: 'secure', role: 'companionate' } },
                        { value: 'calm', label: 'Calm and measured - focused on long-term stability', traits: { attachment: 'avoidant', role: 'pragmatic' } },
                        { value: 'accommodating', label: 'Endlessly accommodating - your needs come second', traits: { attachment: 'fearful', role: 'sacrificial' } },
                        { value: 'intense', label: 'All-in and intense - you love with everything you have', traits: { attachment: 'anxious', role: 'passionate' } }
                    ]
                }
            ];

            const analyzeResults = () => {
                const attachmentCounts = {
                    secure: 0,
                    anxious: 0,
                    avoidant: 0,
                    fearful: 0
                };
                
                const roleCounts = {
                    sacrificial: 0,
                    supportive: 0,
                    passionate: 0,
                    companionate: 0,
                    romantic: 0,
                    pragmatic: 0
                };
                
                Object.values(answers).forEach(answer => {
                    if (answer.traits.attachment && attachmentCounts.hasOwnProperty(answer.traits.attachment)) {
                        attachmentCounts[answer.traits.attachment]++;
                    }
                    if (answer.traits.role && roleCounts.hasOwnProperty(answer.traits.role)) {
                        roleCounts[answer.traits.role]++;
                    }
                });

                const attachmentMap = {
                    secure: { style: 'Secure', color: 'green' },
                    anxious: { style: 'Anxious-Preoccupied', color: 'yellow' },
                    avoidant: { style: 'Dismissive-Avoidant', color: 'blue' },
                    fearful: { style: 'Fearful-Avoidant', color: 'purple' }
                };

                const roleMap = {
                    sacrificial: { role: 'The Sacrificial Lover', color: 'purple', desc: 'You put your partner\'s needs above your own' },
                    supportive: { role: 'The Supportive Lover', color: 'green', desc: 'You nurture and provide emotional scaffolding' },
                    passionate: { role: 'The Passionate Lover', color: 'red', desc: 'You bring intensity and all-consuming devotion' },
                    companionate: { role: 'The Companionate Lover', color: 'blue', desc: 'You build comfortable, best-friend partnerships' },
                    romantic: { role: 'The Romantic Lover', color: 'pink', desc: 'You focus on gestures and maintaining the spark' },
                    pragmatic: { role: 'The Pragmatic Lover', color: 'gray', desc: 'You\'re team-oriented and build life together' }
                };

                // Get primary and secondary attachment styles
                const sortedAttachments = Object.entries(attachmentCounts)
                    .sort((a, b) => b[1] - a[1]);
                
                const primaryAttachment = sortedAttachments[0];
                const secondaryAttachment = sortedAttachments[1];

                // Get primary relationship role
                const sortedRoles = Object.entries(roleCounts)
                    .sort((a, b) => b[1] - a[1]);
                
                const primaryRole = sortedRoles[0];
                const secondaryRole = sortedRoles[1];

                // Calculate percentages
                const attachmentTotal = Object.values(attachmentCounts).reduce((sum, val) => sum + val, 0);
                const attachmentPercentages = {};
                Object.keys(attachmentCounts).forEach(key => {
                    attachmentPercentages[key] = attachmentTotal > 0 ? Math.round((attachmentCounts[key] / attachmentTotal) * 100) : 0;
                });

                const roleTotal = Object.values(roleCounts).reduce((sum, val) => sum + val, 0);
                const rolePercentages = {};
                Object.keys(roleCounts).forEach(key => {
                    rolePercentages[key] = roleTotal > 0 ? Math.round((roleCounts[key] / roleTotal) * 100) : 0;
                });

                return {
                    attachment: attachmentMap[primaryAttachment[0]],
                    secondary: secondaryAttachment[1] > 0 ? attachmentMap[secondaryAttachment[0]] : null,
                    role: roleMap[primaryRole[0]],
                    secondaryRole: secondaryRole[1] > 0 && rolePercentages[secondaryRole[0]] > 20 ? roleMap[secondaryRole[0]] : null,
                    attachmentScores: attachmentCounts,
                    roleScores: roleCounts,
                    attachmentPercentages: attachmentPercentages,
                    rolePercentages: rolePercentages,
                    details: generateDetailedAnalysis(primaryAttachment[0], primaryRole[0])
                };
            };

            const generateDetailedAnalysis = (attachment, role) => {
                const attachmentAnalyses = {
                    secure: {
                        title: 'The Secure Lover',
                        strengths: 'You have a stable sense of self and can balance closeness with independence. You trust others and feel comfortable being vulnerable. You communicate openly and don\'t fear abandonment or engulfment.',
                        challenges: 'Sometimes you may underestimate how much reassurance others need, or be surprised when partners struggle with intimacy that feels natural to you.',
                        inRelationships: 'You give and receive love freely, creating relationships where both partners can flourish. You\'re comfortable with both closeness and independence, making you an easy partner to be with.',
                        growth: 'Continue nurturing open communication and remember that not everyone shares your secure foundation. Your patience and modeling can help anxious or avoidant partners feel safer.'
                    },
                    anxious: {
                        title: 'The Anxious-Preoccupied Lover',
                        strengths: 'You feel deeply and are highly attuned to your partner\'s needs and moods. Your devotion and emotional availability are powerful gifts. You\'re not afraid to pursue connection and express your feelings.',
                        challenges: 'Fear of abandonment can lead to seeking constant reassurance, which may push partners away. You may struggle with self-soothing when a partner needs space, interpreting their need for independence as rejection.',
                        inRelationships: 'You love with your whole heart and crave deep emotional intimacy. You\'re happiest when you feel securely connected and may become distressed when you perceive distance. You may overanalyze communications and seek frequent reassurance.',
                        growth: 'Learning to self-soothe and building security from within will transform your relationships. Your worth isn\'t determined by another\'s attention. Practice trusting that love doesn\'t require constant proof, and that space doesn\'t mean abandonment.'
                    },
                    avoidant: {
                        title: 'The Dismissive-Avoidant Lover',
                        strengths: 'You\'re independent and self-sufficient, with strong boundaries. You bring stability and don\'t lose yourself in relationships. You value your autonomy and can be counted on to maintain your own identity.',
                        challenges: 'Difficulty with vulnerability and emotional intimacy can leave partners feeling shut out. You may withdraw when things get too close, preferring to handle emotions alone. Commitment can feel threatening to your independence.',
                        inRelationships: 'You value your independence highly and may feel uncomfortable when partners want more closeness than you\'re ready for. You can love deeply when you feel safe, but often keep an emotional distance as protection.',
                        growth: 'Practice letting people in gradually. Vulnerability isn\'t weakness—it\'s the gateway to deeper intimacy. Creating space for closeness without losing autonomy is your journey. Your partners aren\'t trying to trap you; they\'re trying to connect.'
                    },
                    fearful: {
                        title: 'The Fearful-Avoidant Lover',
                        strengths: 'You\'re deeply sensitive and aware of relationship dynamics. Your caution protects you from repeating past hurts. When you do let someone in, your love is profound. You understand both the longing for connection and the fear of vulnerability.',
                        challenges: 'You experience an internal conflict: desperately wanting closeness while simultaneously fearing it. You may push people away when they get too close, then panic when they actually leave. Trust is extremely difficult to build.',
                        inRelationships: 'You want connection but fear it too. You may feel torn between craving intimacy and feeling terrified of it. Past wounds make it hard to trust that love is safe. You might test partners or self-sabotage when things get too good.',
                        growth: 'Healing old wounds helps you approach new love with less fear. Not everyone will hurt you the way you\'ve been hurt before. Finding partners who move at your pace, honor your needs, and prove consistent over time can help you learn that love can be safe. Therapy can be especially helpful for your attachment style.'
                    }
                };

                const roleAnalyses = {
                    sacrificial: {
                        description: 'You have a natural tendency to put your partner\'s needs, wants, and happiness above your own. You find meaning in devotion and may struggle to advocate for yourself.',
                        strength: 'Your selflessness and dedication are beautiful qualities. You create a sense of safety for your partner and are deeply committed.',
                        challenge: 'Sometimes this comes at your own expense. You may lose yourself in relationships, ignore your own needs, or enable unhealthy dynamics.',
                        advice: 'Learn that loving yourself isn\'t selfish—it\'s essential. A healthy relationship requires two whole people. Your needs matter just as much as theirs. Practice saying no and setting boundaries.'
                    },
                    supportive: {
                        description: 'You\'re naturally nurturing and create emotional safety for your partner. You encourage growth, listen deeply, and provide steady emotional scaffolding.',
                        strength: 'You help others become their best selves. Your emotional intelligence and empathy make you an incredible partner.',
                        challenge: 'You may take on too much emotional labor or forget that you also need support sometimes.',
                        advice: 'Remember that relationships should be reciprocal. Allow yourself to receive care, not just give it. Your needs for emotional support are valid too.'
                    },
                    passionate: {
                        description: 'You love intensely and all-consumingly. You\'re driven by desire, chemistry, and deep emotional connection. When you love, you love with everything you have.',
                        strength: 'Your intensity and devotion create powerful, memorable relationships. You make your partner feel deeply wanted and alive.',
                        challenge: 'Intensity can burn out or overwhelm partners. You may struggle when the initial passion fades or with the mundane aspects of long-term love.',
                        advice: 'Learn that love evolves and deepening companionship can be as meaningful as early passion. Not every moment needs to be intense. Quiet love is still love.'
                    },
                    companionate: {
                        description: 'You build relationships based on deep friendship, comfort, and shared life. You value low-drama partnership and being best friends with your partner.',
                        strength: 'You create stable, lasting relationships. Your partnership style weathers storms well and you\'re an easy person to be with.',
                        challenge: 'You may avoid conflict or let things get too routine. Some partners might crave more excitement or romantic gestures.',
                        advice: 'Don\'t let comfort turn into complacency. Keep investing in the relationship, try new things together, and remember that friendship doesn\'t mean lack of passion.'
                    },
                    romantic: {
                        description: 'You focus on romantic gestures, courting rituals, and keeping the spark alive. You believe in the magic of love and work to maintain it.',
                        strength: 'You never let your partner forget they\'re special. Your attention to romance keeps relationships feeling fresh and exciting.',
                        challenge: 'You may focus more on grand gestures than daily intimacy, or feel disappointed when reality doesn\'t match your ideals.',
                        advice: 'Real love includes mundane moments. The truest romance is showing up consistently, not just for special occasions. Balance idealism with accepting reality.'
                    },
                    pragmatic: {
                        description: 'You\'re team-oriented and focused on building a life together. You value compatibility, shared goals, and working toward common objectives.',
                        strength: 'You create solid, functional partnerships. You\'re excellent at navigating life\'s challenges together and building something meaningful.',
                        challenge: 'You may prioritize practicality over emotional connection, or treat relationships too transactionally.',
                        advice: 'Don\'t forget that relationships also need emotional nourishment, spontaneity, and romance. You\'re building a life together, but also a love.'
                    }
                };

                return {
                    ...attachmentAnalyses[attachment],
                    roleAnalysis: roleAnalyses[role]
                };
            };

            const handleAnswer = (answer) => {
                setAnswers({ ...answers, [questions[step].id]: answer });
                
                if (step < questions.length - 1) {
                    setStep(step + 1);
                } else {
                    setResults(analyzeResults());
                }
            };

            const restart = () => {
                setStep(0);
                setAnswers({});
                setResults(null);
            };

            if (results) {
                const attachmentColors = {
                    green: 'bg-green-50 border-green-200',
                    yellow: 'bg-yellow-50 border-yellow-200',
                    blue: 'bg-blue-50 border-blue-200',
                    purple: 'bg-purple-50 border-purple-200'
                };

                const roleColors = {
                    purple: 'bg-purple-50 border-purple-200',
                    green: 'bg-green-50 border-green-200',
                    red: 'bg-red-50 border-red-200',
                    blue: 'bg-blue-50 border-blue-200',
                    pink: 'bg-pink-50 border-pink-200',
                    gray: 'bg-gray-50 border-gray-200'
                };

                return (
                    <div className="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-lg">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">Your Relationship Landscape</h1>
                            <p className="text-gray-600">Based on the world you imagined</p>
                        </div>

                        {/* Attachment Style Section */}
                        <div className={`p-6 rounded-lg border-2 mb-6 ${attachmentColors[results.attachment.color]}`}>
                            <h2 className="text-2xl font-bold mb-2">Your Attachment Style: {results.attachment.style}</h2>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4">{results.details.title}</h3>
                            
                            {/* Score breakdown */}
                            <div className="bg-white bg-opacity-50 p-4 rounded-lg mb-4">
                                <h4 className="font-semibold text-gray-700 mb-2">Your Attachment Pattern:</h4>
                                <div className="space-y-2">
                                    {Object.entries(results.attachmentPercentages).map(([style, percent]) => (
                                        <div key={style}>
                                            <div className="flex justify-between mb-1">
                                                <span className="text-sm capitalize">{style.replace('-', ' ')}</span>
                                                <span className="text-sm font-semibold">{percent}%</span>
                                            </div>
                                            <div className="w-full bg-gray-200 rounded-full h-2">
                                                <div 
                                                    className={`h-2 rounded-full ${
                                                        style === 'secure' ? 'bg-green-500' :
                                                        style === 'anxious' ? 'bg-yellow-500' :
                                                        style === 'avoidant' ? 'bg-blue-500' :
                                                        'bg-purple-500'
                                                    }`}
                                                    style={{ width: `${percent}%` }}
                                                />
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="space-y-4 mt-4">
                                <div>
                                    <h3 className="font-semibold text-gray-700">Your Strengths:</h3>
                                    <p className="text-gray-600">{results.details.strengths}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">Your Challenges:</h3>
                                    <p className="text-gray-600">{results.details.challenges}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">In Relationships:</h3>
                                    <p className="text-gray-600">{results.details.inRelationships}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">Path to Growth:</h3>
                                    <p className="text-gray-600">{results.details.growth}</p>
                                </div>
                            </div>
                        </div>

                        {/* Relationship Role Section */}
                        <div className={`p-6 rounded-lg border-2 mb-6 ${roleColors[results.role.color]}`}>
                            <h2 className="text-2xl font-bold mb-2">Your Relationship Role: {results.role.role}</h2>
                            <p className="text-lg text-gray-700 mb-4 font-semibold">{results.role.desc}</p>
                            
                            {/* Role score breakdown */}
                            <div className="bg-white bg-opacity-50 p-4 rounded-lg mb-4">
                                <h4 className="font-semibold text-gray-700 mb-2">Your Love Style Pattern:</h4>
                                <div className="space-y-2">
                                    {Object.entries(results.rolePercentages).map(([role, percent]) => (
                                        <div key={role}>
                                            <div className="flex justify-between mb-1">
                                                <span className="text-sm capitalize">{role}</span>
                                                <span className="text-sm font-semibold">{percent}%</span>
                                            </div>
                                            <div className="w-full bg-gray-200 rounded-full h-2">
                                                <div 
                                                    className={`h-2 rounded-full ${
                                                        role === 'sacrificial' ? 'bg-purple-500' :
                                                        role === 'supportive' ? 'bg-green-500' :
                                                        role === 'passionate' ? 'bg-red-500' :
                                                        role === 'companionate' ? 'bg-blue-500' :
                                                        role === 'romantic' ? 'bg-pink-500' :
                                                        'bg-gray-500'
                                                    }`}
                                                    style={{ width: `${percent}%` }}
                                                />
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="space-y-4 mt-4">
                                <div>
                                    <h3 className="font-semibold text-gray-700">What This Means:</h3>
                                    <p className="text-gray-600">{results.details.roleAnalysis.description}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">Your Strength:</h3>
                                    <p className="text-gray-600">{results.details.roleAnalysis.strength}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">Your Challenge:</h3>
                                    <p className="text-gray-600">{results.details.roleAnalysis.challenge}</p>
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700">Growth Advice:</h3>
                                    <p className="text-gray-600">{results.details.roleAnalysis.advice}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6">
                            <p className="text-sm text-gray-700">
                                <strong>Remember:</strong> These patterns are tendencies, not destiny. Attachment styles can heal and evolve with self-awareness, therapy, and secure relationships. 
                                Your love style can grow and adapt. The awareness you gain here is the first step toward choosing how you want to love.
                            </p>
                        </div>

                        {results.secondary && results.attachmentPercentages[results.secondary.style.toLowerCase().split('-')[0]] > 25 && (
                            <div className="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6">
                                <p className="text-sm text-gray-700">
                                    <strong>Note:</strong> You also showed significant traits of {results.secondary.style} attachment ({results.attachmentPercentages[results.secondary.style.toLowerCase().split('-')[0]]}%). 
                                    Many people exhibit a blend of attachment styles, or may shift between styles depending on the relationship or life circumstances.
                                </p>
                            </div>
                        )}

                        {results.secondaryRole && (
                            <div className="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6">
                                <p className="text-sm text-gray-700">
                                    <strong>Secondary Love Style:</strong> You also show traits of {results.secondaryRole.role} ({results.rolePercentages[Object.keys(results.rolePercentages).find(k => results.rolePercentages[k] === Math.max(...Object.values(results.rolePercentages).filter((v, i, arr) => v !== Math.max(...arr))))]  || 0}%). 
                                    Most people blend multiple love styles depending on the relationship and their own growth.
                                </p>
                            </div>
                        )}

                        <button 
                            onClick={restart}
                            className="w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg font-semibold hover:from-pink-600 hover:to-purple-600 transition"
                        >
                            Take the Test Again
                        </button>
                    </div>
                );
            }

            const currentQuestion = questions[step];
            const Icon = currentQuestion.icon;

            return (
                <div className="max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg">
                    <div className="mb-6">
                        <div className="flex justify-between items-center mb-4">
                            <h1 className="text-2xl font-bold text-gray-800">The Relationship Landscape</h1>
                            <span className="text-sm text-gray-500">Question {step + 1} of 18</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div 
                                className="bg-gradient-to-r from-pink-500 to-purple-500 h-2 rounded-full transition-all duration-300"
                                style={{ width: `${((step + 1) / questions.length) * 100}%` }}
                            />
                        </div>
                    </div>

                    <div className="text-center mb-8">
                        <Icon className="w-16 h-16 mx-auto mb-4 text-purple-500" />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">{currentQuestion.title}</h2>
                        <p className="text-gray-600 text-lg">{currentQuestion.prompt}</p>
                    </div>

                    <div className="space-y-3">
                        {currentQuestion.options.map((option, index) => (
                            <button
                                key={index}
                                onClick={() => handleAnswer(option)}
                                className="w-full p-4 text-left border-2 border-gray-200 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-all duration-200 group"
                            >
                                <span className="text-gray-800 group-hover:text-purple-700 font-medium">
                                    {option.label}
                                </span>
                            </button>
                        ))}
                    </div>

                    <div className="mt-6 text-center text-sm text-gray-500">
                        Choose the answer that feels most natural to you
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RelationshipLandscapeGame />);
    </script>
</body>
</html>
